<!DOCTYPE html>
<html lang="es">
<head>
	<title>Ejercicio de Javascript</title>
</head>
<body>
	<h1>Usted es mayor de edad?</h1>
	<p><strong>Ingrese su fecha de nacimiento y descubralo....</strong></p>

	<p id="mensajes"></p>

	<form action="deded.php" method="get" id="formu">

	<label for="fnacim">dd/mm/yyyy </label>
		<input type="text" name="dsdsd" id="fnacim"/>	
		<br/>
	
		<input type="submit" id="calcular" value="Calcular">
	</form>
	<script>
		"use strict"
		
		function edad() {
		var fnacim = document.getElementById("fnacim").value;
		if(fnacim.length != 10){// los strings tienen metodos por que son objetos
			alert("Ingrese la fecha dd/mm/yyyy ");
			return;	
		}
		if (fnacim.substr(2,1) != "/" || fnacim.substr(2,1) != "/") {
			alert("Ingrese la fecha dd/mm/yyyy ");
			return;	
		}
		var d = parseInt(fnacim.substr(0,2));// de un string obtengo un pedasito del string
		var m = parseInt(fnacim.substr(3,2));
		var ano = parseInt(fnacim.substr(6,4));
		
		var dt = new Date();
		var month = dt.getMonth()+1;
		var day = dt.getDate();
		var year = dt.getFullYear();

		if (year-ano >= 18) {
			if (year-ano > 18) {					 
					 return true;
				}
			if (year-ano == 18) {
				if(m > month){
					 es_menor ();
					 return false;
				}	
				if (m < month){					 
					 return true;
				}			
				if(m == month){
					if (d <= day ) {						 
						 return true;
					}
					else  es_menor ();
					return false;
				}				
				}
							
			}
			 else {
			 	es_menor ();
			 	return false;
			 	}
			}
			
		function es_mayor (){
			//alert("es mayor de edad");
			document.getElementById("mensajes").style.display = "block";
			document.getElementById("mensajes").innerHTML = "es mayor de edad";// a travez del id en el parrafo escribo un msj en la pagina
			document.getElementById("mensajes").style.color = "blue";
			document.getElementById("mensajes").style.fontSize = "9pt";
		}
		function es_menor (){
			//alert ("es menor de edad");
			document.getElementById("mensajes").style.display = "block";
			document.getElementById("mensajes").innerHTML = "es menor de edad";
			document.getElementById("mensajes").style.color = "red";
			document.getElementById("mensajes").style.fontSize = "20pt"; // acca font-size no lleva guion en el medio por que no es css
		}
		var i = 0 ;	
		function ocultar (){
			console.log("ocultando" + i ++); //para ver que va pansandoo en la consola
			document.getElementById("mensajes").style.display = "none";
		}

		document.getElementById("formu").onsubmit = edad; //atiendo evento submit de un formulario y se llama la funcion edad
		document.getElementById("fnacim").onfocus = ocultar;
		
		


		
		
	</script>
	


</body>
</html>